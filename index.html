<!DOCTYPE html>
<html>
<head>
	<title>Coordinates Generator</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximun-scale=1.0, minimun-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.timer.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyAHd6KyYBd0Ux6e7ureks9uHpANNhDBfP4&libraries=drawing"></script>
	<script>
    var map;
    var drawingManager;
    var coordinates = {};
    var shape;

	function initMap() {
		map = new google.maps.Map(document.getElementById('map'), {
			center: {lat: -34.397, lng: 150.644},
			zoom: 8
		});

		drawingManager = new google.maps.drawing.DrawingManager({
			drawingMode: google.maps.drawing.OverlayType.MARKER,
			drawingControl: true,
			drawingControlOptions: {
			  position: google.maps.ControlPosition.TOP_CENTER,
			  drawingModes: [
			    google.maps.drawing.OverlayType.CIRCLE,
			    google.maps.drawing.OverlayType.POLYGON,
			    google.maps.drawing.OverlayType.RECTANGLE
			  ]
			}
		});

		drawingManager.setMap(map);

		google.maps.event.addListener(drawingManager, 'circlecomplete', function(circle) {
			createShape(circle,'C');
		});

		google.maps.event.addListener(drawingManager, 'rectanglecomplete', function(event) {
			createShape(event,'R');
		});

		google.maps.event.addListener(drawingManager, 'polygoncomplete', function(event) {
			createShape(event,'P');
			generateCoordinates(event);
		});

	}

	function createShape(data,type)
	{

		var coords = [];

		var vData = data.latLngs.j[0].j;
		for(var i = 0; i < vData.length;i++)
		{
			objectLocal = {
				lat: vData[i].lat(),
				lng: vData[i].lng()
			};
			coords.push(objectLocal);
		}

		console.log(coords);
		
		switch(type)
		{
			case 'P':
				shape = new google.maps.Polygon({paths: coords});
				break;
			case 'R':
				break;
			case 'C':
				break;
		}

		var latLong = {
			lat: 0.000000,
			lng: 0.000000
		}
		/*
		if(google.maps.geometry.poly.containsLocation(latLong, shape))
		{
			alert('Contiene');
		}
		else
		{
			alert('No Contiene');
		}
		*/
		google.maps.event.addListener(map, 'click', function(e) {
			if(google.maps.geometry.poly.containsLocation(e.latLng, shape))
			{
				alert('Contiene');
			}
			else
			{
				alert('No contiene');
			}
	  	});
		
		console.log(shape);
	}

	function showCoordinatesWrap()
	{

	}

	function showCoordinates()
	{

	}

	function generateCoordinates(data)
	{
		

		chooseDrawType();
		
	}

	function chooseDrawType()
	{
		if($('#wrapCheck').is(':checked'))
		{
			showCoordinatesWrap();
		}
		else
		{
			showCoordinates();
		}
	}
	

	$(document).ready(function(){
		initMap();
	})
	</script>
</head>
<body>
	<div class="container">
		<div class="row">
			<h1>Coordinate Generator</h1>
		</div>
		<div class="row">
			<div class="col-xs-8" style="height:400px">
				<div id="map" style="height:100%">
					
				</div>
			</div>
			<div class="col-xs-4">
				<div class="form-group">
					<div class="col-sm-12 bg-info" align="center">
						<div class="checkbox">
							<label>
							<input id="wrapCheck" type="checkbox"> Wrap
							</label>
						</div>
					</div>
				
					<textarea class="form-control" style="width:100%" rows="15">Coordinates</textarea>
				</div>
			</div>
		</div>
		<div class="row col-xs-8">
			<div class="col-xs-6">
				<div class="radio">
				<label>
					<input type="radio" name="bottomToTop" id="bottomToTopB" value="b" checked>
					Bottom
				</label>
				</div>
				<div class="radio">
				<label>
					<input type="radio" name="bottomToTop" id="bottomToTopT" value="t">
					Top
				</label>
				</div>
			</div>
			<div class="col-xs-6">
				<div class="radio">
				<label>
					<input type="radio" name="leftToRight" id="leftToRightL" value="l" checked>
					Left
				</label>
				</div>
				<div class="radio">
				<label>
					<input type="radio" name="leftToRight" id="leftToRightR" value="r">
					Right
				</label>
				</div>
			</div>
		</div>
		<div class="row col-xs-12">
			<button type="button" class="btn btn-primary">Generate</button>
		</div>
	</div>
</body>
</html>